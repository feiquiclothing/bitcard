<!-- ...el resto del HTML igual... -->

<div class="count">Ranking: <strong id="Ranking">-</strong></div>
<div class="quote">Tu presencia quedó registrada por el sistema.</div>

<!-- Mensaje de visita acreditada -->
<p id="mensaje" style="color: #00aa00; font-size: 14px; display: none; margin-top: -20px;">+1 visita acreditada</p>

<!-- ...seguimos con el resto del HTML... -->

<script>
  const clienteId = "001";
  const apiUrl = "https://api.sheetbest.com/sheets/ed93a752-33f3-4320-b34d-09212281bd8b";
  const secret = "111";

  const imagenesPorCirculo = {
    "NULL": "https://cdn.shopify.com/s/files/1/0550/5001/0810/files/1_e59d1fc3-073a-4ca6-b501-f66c3c3ce439.png?v=1744482250",
    "ENTRY": "https://cdn.shopify.com/s/files/1/0550/5001/0810/files/2_d950d01d-6333-4395-adbb-83c712be7ef6.png?v=1744482250",
    "POSTHUMAN": "https://cdn.shopify.com/s/files/1/0550/5001/0810/files/3_02239a12-e4b0-477b-9f78-0d057f3841d9.png?v=1744482250"
  };

  fetch(apiUrl)
    .then(response => response.json())
    .then(data => {
      const cliente = data.find(c => c.ID === clienteId);
      if (cliente) {
        const nuevasVisitas = parseInt(cliente.Visitas || 0) + 1;

        // Mostrar datos
        document.getElementById("nombre").textContent = `SUJETO: ${cliente.Nombre}`;
        document.getElementById("circulo").textContent = `CÍRCULO: ${cliente.Círculo}`;
        document.getElementById("Bits").textContent = cliente.Bits;
        document.getElementById("Visitas").textContent = cliente.Visitas;
        document.getElementById("Ranking").textContent = cliente.Ranking;

        // Imagen dinámica por círculo
        const imagenCírculo = imagenesPorCirculo[cliente.Círculo.toUpperCase()];
        if (imagenCírculo) {
          document.getElementById("circuloImagen").src = imagenCírculo;
        }

        // Actualizar visitas si auth es correcto
        const urlParams = new URLSearchParams(window.location.search);
        const authParam = urlParams.get("auth");

        if (authParam === secret) {
          const updatedData = {
            ID: cliente.ID,
            Nombre: cliente.Nombre,
            Bits: cliente.Bits,
            Ranking: cliente.Ranking,
            Círculo: cliente.Círculo,
            Visitas: nuevasVisitas
          };

          fetch(`${apiUrl}/ID/${clienteId}`, {
            method: "PUT",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(updatedData)
          });

          // Actualizar el número en pantalla
          document.getElementById("Visitas").textContent = nuevasVisitas;

          // Mostrar mensaje de "+1 visita acreditada"
          const mensaje = document.getElementById("mensaje");
          mensaje.style.display = "block";

          setTimeout(() => {
            mensaje.style.display = "none";
          }, 3000);
        }
      } else {
        console.error("Cliente no encontrado");
      }
    });
</script>
