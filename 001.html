<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>BitCard</title>
  <link rel="icon" href="favicon.png" type="image/png">
</head>
<body>
  <p>Cargando...</p>

  <script>
    // Obtener el ID del cliente desde el nombre del archivo
    const path = window.location.pathname;
    const filename = path.substring(path.lastIndexOf('/') + 1); // "001.html"
    const clientId = filename.split('.')[0]; // "001"

    Promise.all([
      fetch('clientes.json').then(r => r.json()),
      fetch('eventos.json').then(r => r.json())
    ])
    .then(([clientes, evento]) => {
      const circulo = clientes[clientId];

      if (!circulo) {
        document.body.innerHTML = "Cliente no encontrado.";
        return;
      }

      if (evento.evento_activo && evento.circulos[circulo]) {
        window.location.href = evento.circulos[circulo];
      } else {
        document.body.innerHTML = `Tu círculo es: <strong>${circulo.toUpperCase()}</strong><br>No hay evento activo o no aplica para tu círculo.`;
      }
    })
    .catch(error => {
      console.error("Error:", error);
      document.body.innerHTML = "Hubo un problema al cargar los datos.";
    });
  </script>
</body>
</html>
